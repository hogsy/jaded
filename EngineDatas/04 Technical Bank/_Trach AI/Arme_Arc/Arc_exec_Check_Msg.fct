#include "Arc_defines.var"

message 	msg
int				ti_nbmsg
int				ti_launch
object		to_Cible
float			tf_Time
vector		tv_temp

i_msg_launch_received = faux

ti_launch = faux

// Recherche des messages arrivés
ti_nbmsg = MSG_GetCount()
while	( ti_nbmsg )
{
	msg = MSG_Get()
	ti_nbmsg = MSG_GetCount()

	switch( msg.msg_id )
	{
		// dropée
		case msg_id_grenadefall :
			mo_Sender = msg.msg_sender
			if (! mo_Sender)
				mo_Sender = AI_MainActorGet(C_ID_Joueur)
			mv_LaunchSpeed = msg.msg_vec1
			mv_LaunchGravity = Cv_NormalGravity
			mv_LaunchFriction = cvector(1.0, 1.0, 0.0)
			ti_launch = 1
			break
		
		// détruite ?	
		case msg_id_grenadedestroy :
			OBJ_Destroy()
			return
			break
	}
}


// lancez !!!
if( ti_launch )
{
	OBJ_FlagInvisibleSet(faux)
	i_msg_launch_received = vrai
}

