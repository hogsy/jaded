#include "KAnn_defines.var"

int			ti_i


// SORTIE ETAT ===================================================================
if (i_sort_etat)
{
	i_sort_etat = faux
	f_time_mort = 0.0
	return
}

// INITIALISATION ETAT ==============================================================
if (i_etat_courant != ETAT_mort)
{
	i_dernier_etat = i_etat_courant
	i_etat_courant = ETAT_mort

	if (fct_last_etat)
	{
		i_sort_etat = vrai
		AI_Execute(fct_last_etat)
	}

	fct_last_etat = AI_TrackCurGet()

	// AUTORISATIONS DES GRABS
	for (ti_i = 0; ti_i < Ci_LNK_TYPE_NB; ti_i++)
		ai_SRV_ENABLE[ti_i] = faux
	
	OBJ_CapaSet(CAPA_Mort, 0)

	ACT_ActionSet(Ann_mort)
	
	f_time_start_etat = 0.0
	
	if (f_time_mort == 0.0)
		f_time_mort = TIME_Get()
	
	KAnn_Death_Timer_Reset()
	
	DYN_Off()		// y'a des pb de colmap dans les maps, alors pas de dyna du tout !!!!
}
else
{
	f_time_start_etat += TIME_GetDt()
}

@"univ" MENU_f_LockedDuring = 30	// Disable Menu Page
