//#include "H_defines.var"
//#include "H_action.var"
//
//object	to_camera 
//vector	tv_zde_fight
//
//float			ti_paf
//int			ti_i
//int			col
//int			ti_bone_num
//int			ti_action_kit
//int			ti_flag_human_grab
//int			ti_weapon
//int			ti_enable_blend
//int			ti_num
//int			ti_shape
//int			ti_temp, ti_noarm
//int			ti_valide_enjoue
//int			ti_gfx
//int			i
//int			ti_cancan
//
//float		tf_prog[10]
//float		tf_factor[10]
//int			ti_data[10][5]
//
//float		tf_dist
//float		tf_sign
//float		tf_dot_product
//float		tf_angle
//float		tf_toler_suiv_regard
//float		tf_temp
//float		tf_born
//float		tf_time_dyna_fire
//
//vector	tv_pos
//vector	tv_sight
//vector	tv_start_sight
//vector	tv_dest_sight
//vector	tv_bone_to_cam_pos
//vector	tv_next_pilotage_dest_sight
//vector	tv_cible_tete
//vector	tv_temp, tv_temp1, tv_temp2, tv_temp3, tv_temp4
//vector	tv_bras_vertical_G
//vector	tv_bras_vertical_D
//
//object	to_obj, to_obj1
//object	to_actor
//object	to_bone
//object	to_my_bone
//object	to_head
//object	to_torse
//object	to_maind
//object	to_maing
//int			cbact
//object	to_bidoche
//
//vector	tv_sight_visee
//vector	tv_cible_arme
//vector	tv_cible_yeux
//
//color		col_lig
//float		tf_speed_look
//
//if( i_etat_courant == ETAT_joueur_fake )
//	return
//
//// Herbes
//SPG2_AddSphere(OBJ_PosGet(), 2.0)
//
//v_last_dyn_speed = v_dyn_speed
//v_dyn_speed = DYN_SpeedGetVector()
//
//// Calcul cible tirs
//RayTirs()
//
//// Montrer/Cacher l'arme
//ti_shape = vrai
//
//to_obj = ANI_CanalObjectGet(Anim_Canal_MainDroite)
//tv_temp = @to_obj OBJ_PosGet() - OBJ_PosGet()
//if(tv_temp.z < 1.15) 
//{
//	i_arme_bas = vrai
//	i_wait_arme_bas = faux
//}
//else if(i_wait_arme_bas) 
//	i_arme_bas = vrai
//
//ti_num = ACT_ActionGet()
//if(ti_num == Action_Jack_MarcheMainLibres) i_arme_bas = vrai
//else if(ti_num == Action_Jack_AttMainLibres_Attrape) i_arme_bas = vrai
//else if(ti_num == Action_Jack_AttMainLibres_Montre) i_arme_bas = vrai
//else if(ti_num == Action_Jack_AttMainLibres_Bambou) i_arme_bas = faux
//else if(ti_num == Action_Jack_AttMainLibres_TNT) i_arme_bas = faux
//else if(ti_num == Action_Jack_RepousseHerbeG) i_arme_bas = vrai
//else if(ti_num == Action_Jack_RepousseHerbeD) i_arme_bas = vrai
//else if(ti_num == Action_Jack_Bambou_Tr) i_arme_bas = faux
//else if(ti_num == Action_Jack_CoupPoing) i_arme_bas = vrai
//else if(ti_num == Action_Jack_CoupCrosse) i_arme_bas = faux
//else if(ti_num == Action_Jack_Ramasse || ti_num == Action_Jack_RamasseF) 
//{
//	if(ACT_ActionItemGet() == 0)
//		i_arme_bas = vrai
//	else if(@"univ" i_ramasse_objet >= Ci_weapon_ID_munition && @"univ" i_ramasse_objet <= Ci_weapon_ID_munition_end) // Pas de shape pour ca
//		i_arme_bas = vrai
////		else if(@"univ" i_ramasse_objet == Ci_weapon_ID_levier)
////			i_arme_bas = vrai
//	else if(ti_num != Action_Jack_AttMainLibres) 
//		i_arme_bas = faux
//}
//else if(ti_num != Action_Jack_AttMainLibres) 
//{
//	i_arme_bas = faux
//}
//
//ti_weapon = @"univ" i_weapon_ID[i_id_humain]
//if (PartialTir()) i_arme_bas = faux
//
//ti_num = ACT_ActionGet()
//if(ti_num == 1 && i_cache_leave) i_arme_bas = vrai
//else i_cache_leave = faux
//
//if(BambouEnMain())
//{
//	ti_shape = faux
//	if(ti_num == Action_Jack_AttMainLibres_Bambou) ti_shape = vrai
//	if(ti_num == Action_Jack_AttMainLibres_TNT) ti_shape = vrai
//	if(ti_num == Action_Jack_MarcheMainLibres_Bambou) ti_shape = vrai
//	if(ti_num == Action_Jack_MarcheMainLibres_TNT) ti_shape = vrai
//	if(ti_num == Action_Jack_Bambou_FBas) ti_shape = vrai
//	if(ti_num == Action_Jack_Bambou_FHaut) ti_shape = vrai
//	if(ti_num == Action_Jack_Att_Bambou) ti_shape = vrai
//	if(ti_num == Action_Jack_Att_Bambou_Crouch) ti_shape = vrai
//	if(ti_num == Action_Jack_Att_TNT) ti_shape = vrai
//	if(ti_num == Action_Jack_Marche_Bambou) ti_shape = vrai
//	if(ti_num == Action_Jack_Marche_Bambou_Crouch) ti_shape = vrai
//	if(ti_num == Action_Jack_Ramasse || ti_num == Action_Jack_RamasseF) ti_shape = vrai
//	if (i_grenade_launched && i_etat_courant == ETAT_IA_lance) i_arme_bas = vrai
//}
//else if(ti_num == Action_Jack_AttMainLibres)
//	ti_shape = faux
//
//// Arme en main
//if(ti_shape || i_first_trame)
//{
//	ti_weapon = @"univ" i_weapon_ID[i_id_humain]
//	if(ti_weapon)
//		i_first_trame = faux
//	ti_num = ACT_ActionGet()
//	switch(ti_num)
//	{
//	case Action_Jack_Bambou_Tr : 
//		ti_weapon = Ci_weapon_ID_bambou 
//		break
//	}
//
//	if(i_mode_attrape)
//	{
//		if(i_id_humain == C_ID_Hayes)
//			ti_weapon = i_obj_lance_type_hayes
//		else 
//		{
//			if(ACT_ActionItemGet() >= 1)
//				ti_weapon = i_obj_lance_type_hayes
//			else if(i_obj_lance_type_jack)
//				ti_weapon = i_obj_lance_type_jack
//			else
//				ti_weapon = i_obj_lance_type_hayes
//		}
//	}
//	
//	i_cur_shape = ti_weapon
//	switch(ti_weapon)
//	{
////		case Ci_weapon_ID_shotgun :
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD, 6)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 6)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 6)
////			break
////		case Ci_weapon_ID_sniper_rifle :
////			if(i_flag_snipe) i_arme_bas = vrai
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD, 5)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 5)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 5)
////			break
////		case Ci_weapon_ID_tommy_gun :
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD, 2)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 2)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 2)
////			break
////		case Ci_weapon_ID_grenade :
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD, 3)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 3)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 3)
////			break
//		case Ci_weapon_ID_crane :
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD, 11)
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 3)
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 3)
//			break
////		case Ci_weapon_ID_colt :	
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD, 4)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 4)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 4)
////			break
//		case Ci_weapon_ID_bambou :
////				if(joueur && @"univ" i_jack_cpt_plug >= PLUG_CASSE)
////					ANI_ShapeSelect(Anim_Canal_Snap_MainD, 13)
////				else
//				ANI_ShapeSelect(Anim_Canal_Snap_MainD, 10)
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 3)
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 3)
//			break
////		case Ci_weapon_ID_bambou_moy :
//////				if(joueur && @"univ" i_jack_cpt_plug >= PLUG_CASSE_MED)
//////					ANI_ShapeSelect(Anim_Canal_Snap_MainD, 14)
//////				else
////				ANI_ShapeSelect(Anim_Canal_Snap_MainD, 7)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 3)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 3)
////			break
////		case Ci_weapon_ID_bambou_petit :
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD, 9)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 3)
////			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 3)
////			break
//		case Ci_weapon_ID_levier :
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD, 12)
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 3)
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 3)
//			break
//		default:
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD, 0)
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD+1, 0)
//			ANI_ShapeSelect(Anim_Canal_Snap_MainD+2, 0)
//			break
//	}
//}
//
//if((i_cache_arme || i_arme_bas || i_soin_en_cours) && !i_recharge_arme && !i_arme_shotgun)
//{
//	i_shape_hide = 0
//	if(!o_canal_annexe1) o_canal_annexe1 = ANI_CanalObjectGet(Anim_Canal_Annex1)
//	to_obj = o_canal_annexe1
//	@to_obj OBJ_DrawMaskSet(0, DM_C_Draw)		
//	to_obj = ANI_CanalObjectGet(Anim_Canal_Annex2)
//	if(to_obj) @to_obj OBJ_DrawMaskSet(0, DM_C_Draw)		
//	to_obj = ANI_CanalObjectGet(Anim_Canal_Annex3)
//	if(to_obj) @to_obj OBJ_DrawMaskSet(0, DM_C_Draw)		
//}
//else
//{
//	i_shape_hide = 1
//	to_obj = o_canal_annexe1
//	if(!o_canal_annexe1) o_canal_annexe1 = ANI_CanalObjectGet(Anim_Canal_Annex1)
//	to_obj = o_canal_annexe1
//	@to_obj OBJ_DrawMaskSet(DM_C_Draw, 0)		
//	to_obj = ANI_CanalObjectGet(Anim_Canal_Annex2)
//	if(to_obj) @to_obj OBJ_DrawMaskSet(DM_C_Draw, 0)		
//	to_obj = ANI_CanalObjectGet(Anim_Canal_Annex3)
//	if(to_obj) @to_obj OBJ_DrawMaskSet(DM_C_Draw, 0)		
//}
//
//// Planque la balle du shotgun sauf si recharge
//if(ANI_ShapeGet(Anim_Canal_Snap_MainD) == 6)
//{
//	if(ACT_PartialActionGet() != Action_Hayes_Recharge_Mix + 2)
//	{
//		to_obj = ANI_CanalObjectGet(Anim_Canal_Annex3)
//		@to_obj OBJ_DrawMaskSet(0, DM_C_Draw)		
//	}
//}
//
//// Planque la balle du snipe
//if( @"univ" i_weapon_ID[i_id_humain] == Ci_weapon_ID_sniper_rifle)
//{
//	if( ACT_PartialActionGet() != Action_Hayes_Recharge_Mix + 3 )
//	{
//		to_obj = ANI_CanalObjectGet(Anim_Canal_Annex3)
//		@to_obj OBJ_DrawMaskSet(0, DM_C_Draw)
//	}
//}
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//tf_toler_suiv_regard = Cf_Cos30
//tv_next_pilotage_dest_sight = Cv_NullVector
//
//tv_next_pilotage_dest_sight = OBJ_SightGet()
//tf_toler_suiv_regard = 0.0
//
//
//// POSITION CAMERA
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//if( (OBJ_FlagsStatusGet() & OBJ_C_StatusFlag_Active) && ! @get_global o_cam_on && ! @get_global o_cam_cut)
//{
//	to_camera = @get_global o_camera
//	ti_enable_blend = faux
//	tv_temp = @to_camera  OBJ_PosGet()
//	to_obj = ANI_CanalObjectGet(Anim_Canal_Tete)
//	
//	tf_temp = MATH_VecNorm(IO_JoyGetMove1())
//	if(i_flag_tir || tf_temp < 0.4)
//		v_cam_last_joy1 = MATH_VecBlend(v_cam_last_joy1, Cv_NullVector, 1 * TIME_GetDt())
//	else if(i_flag_snipe)
//		v_cam_last_joy1 = MATH_VecBlend(v_cam_last_joy1, -IO_JoyGetMove1()*0.4, 0.5 * TIME_GetDt())
//	else
//		v_cam_last_joy1 = MATH_VecBlend(v_cam_last_joy1, -IO_JoyGetMove1()*0.4, 1.5 * TIME_GetDt())
//		
//	tv_temp1 = v_cam_last_joy1
//	tv_temp1.y = 0
//	tv_temp1 = @to_camera MATH_VecLocalToGlobal(tv_temp1)
//	if(i_flag_snipe)
//		tv_temp1 *= 0.05
//	else
//		tv_temp1 *= 0.2
//	tv_temp1 += @to_camera OBJ_SightGet()
//	
//	tv_temp2 = v_cam_last_joy1
//	if(i_flag_snipe)
//		tv_temp2 *= 0.05
//	else
//		tv_temp2 *= 0.2
//	tv_temp2 = @to_camera OBJ_BankingGet() + (@to_camera OBJ_SightGet() * tv_temp2.y)
//	
//	if(i_flag_pousse) tv_temp1 = v_sight_pousse
//	if(i_flag_nage || i_flag_pousse || i_soin_en_cours) tv_temp2 = Cv_VerticalVector
//	
//	v_cam_last_sight = tv_temp1
//	v_cam_last_bank = tv_temp2
//	
//	@to_obj OBJ_BankingGeneralSet(v_cam_last_sight, v_cam_last_bank)
//	@to_obj OBJ_PosSet(tv_temp)		
//	
//	// Plug sur jack
//	if(@get_global o_bidoche_plug_jack)
//	{
//		to_obj1 = @get_global o_bidoche_plug_jack
//		to_obj = ANI_CanalObjectGet(Anim_Canal_Annex1)
//		
//		tv_temp = @to_obj OBJ_BankingGet() * 1.2
//		tv_temp += @to_obj OBJ_SightGet() * 0.4
//		tv_temp -= @to_obj OBJ_HorizonGet() * 0.35
//		@to_obj1 OBJ_PosSet(@to_obj OBJ_PosGet() + tv_temp)
//		@to_obj1 OBJ_SightGeneralSet(tv_temp, Cv_VerticalVector)
//	}	
//	
//	if(i_flag_va_mourrir)
//	{
//		tv_temp = cvector(0,0.1,0.8)
//		tv_temp = MATH_VecBlendRotate(@get_camera OBJ_SightGet(), tv_temp, 2 * TIME_GetDt())
//		tv_temp1 = MATH_VecBlendRotate(@get_camera OBJ_BankingGet(), OBJ_HorizonGet(), TIME_GetDt())
//		@get_camera OBJ_SightGeneralSet(tv_temp, tv_temp1)
//	}
//}
//
//if (i_etat_courant == ETAT_IA_porte)
//	JACK_TournePilier()
//
//
//// FX	
//ti_weapon = @"univ" i_weapon_ID[i_id_humain]
//if 
//( 
//	(@"univ" i_weapon_ammunition[ti_weapon][i_id_humain]) 
//||	BambouEnMain()
//)
//{
//	AI_Execute("H_exec_GFX_Weapon")
//}
//else if (GFX_Weapon_Tommygun != -1)
//{
//	GFX_Del(GFX_Weapon_Tommygun)
//	GFX_Weapon_Tommygun = -1
//}
//
//// --------( objet en main = arme enflammable : gestion feu )--------
//GFX_FlammeType = GFX_Fire_GetType()
////to_bone = o_canal_annex1
//
//
//// ARME EMPOISONNEE =======================
//if( H_Weapon_IsPoisonned() )
//{
//	// La pluie l'éteind
//	if( ! @get_global ENV_pluie_interdit && @get_global ENV_pluie_encours )
//	{
//		H_Weapon_SetPoisonned(faux)
//	}
//}
//else if( i_flag_tape_bambou )
//{
//	//----( en contact avec du poison )----
//	DBG_RenderVector(GFX_FlammePos, cvector(0,0,2), 0xFFFF00)
//	if( EVENT_POISON_IsPosInPoison(GFX_FlammePos, o_grabbed_object_en_main) && !f_time_no_fire )
//	{
//		H_Weapon_SetPoisonned(vrai)
//		if( @get_global o_bidoche_plug_jack )
//		{
//			to_bidoche = @get_global o_bidoche_gao
//			@to_bidoche OBJ_CapaSet(CAPA_Bidoche_Poisonned, none)
//		}
//	}
//}
//
//
//// ARME ENFLAMMEE ==========================
//if( GFX_FlammeType && o_canal_annexe1 )
//{
//	GFX_Fire_ComputePos()
//	
//	//----( dynamite : règle longueur de la meche )----
//	if ( GFX_FlammeType == 3 )
//	{
//		@o_canal_annexe1 OBJ_MorphFactorSet( 0, 1 )
//		@o_canal_annexe1 OBJ_MorphProgSet( 0, 2.0 - (f_time_dynamite / C_Time_Dyna) )
//	}
//
//	// ====[ Ca brule ]====
//	if( H_Weapon_IsOnFire() )
//	{
//		// La pluie l'éteind
//		if( ! @get_global ENV_pluie_interdit && @get_global ENV_pluie_encours )
//		{
//			if(TIME_Elapsed(time_pshhhh, 1))
//			{
//				time_pshhhh = TIME_Get()
//				SND_RequestPlay(37)	
//				LIGGFX_Fumee(i_gfx_fumee1, i_gfx_fumee2, GFX_FlammePos, 2)			
//			}
//			
//			GFX_Fire_Stop()
//			goto GFX_Flamme_endlabel
//		}
//		
//		//----( éteint la flamme si on traverse de l'eau )----
//		if (GFX_FlammeOldPos != Cv_NullVector)
//		{
//			tv_temp = GFX_FlammePos - GFX_FlammeOldPos
//			if ( MATH_VecDotProduct(tv_temp,tv_temp) < 1 )
//			{
//				to_obj = COL_RayObject_Vector( GFX_FlammeOldPos, tv_temp, all, none, Ci_Filter_IdentityFlag, COL_C_Ray_on_visuel)
//				if (to_obj && (COL_RayObject_SoundGet() == COL_C_Snd_Water) )
//				{
//					SND_RequestPlay(37)
//					GFX_Fire_Stop()
//					LIGGFX_Fumee(i_gfx_fumee1, i_gfx_fumee2, GFX_FlammePos, 2)
//					goto GFX_Flamme_endlabel
//				}
//			}
//		}
//		
//		// Bidoche plugée
//		if( @get_global o_bidoche_plug_jack)
//		{
//			to_obj = @get_global o_bidoche_gao
//			@to_obj OBJ_CapaSet(CAPA_Bidoche_Snapped_SeDetacher, none)
//
//			@get_global o_bidoche_gao = nobody
//			@get_global o_bidoche_plug_jack = nobody
//		}
//
//		//----( sound )----
//		if(i_snd_fire == -1) 
//			i_snd_fire = SND_RequestPlayLoop(SND_Jack_BambooFire)
//		
//		//----( bambou enflammé )----
//		if( ( GFX_FlammeType == 1 ) || (GFX_FlammeType == 2) )
//		{
//			//----( GFX )----
//			if( GFX_FlammeType == 1 )
//			{
//				//LIBGFX_JavelinFire2(vector tv_pos, vector tv_axis, int ti_flag_on_off, byrefarr int ai_GFX_Fire, byref int ti_GFX_Halo, byref vector tv_last_last_pos, byref vector tv_last_pos)
//				if( ! @get_global i_Player_is_Kong && ! i_jump_from_KK_flag )
//					LIBGFX_JavelinFire2( GFX_FlammeFXPos, GFX_FlammeAxe, 1.0, 1, &GFX_Flamme2[0], GFX_Flamme2_Halo, GFX_Flamme2_lastlastpos, GFX_Flamme2_lastpos)
//			}
//			else
//			{				
//				ti_gfx = GFX_Flamme
//				if (GFX_FlammeOldPos != Cv_NullVector)
//				{
//					tv_temp = GFX_FlammeFXPos - GFX_FlammeFXOldPos
//					if (MATH_VecDotProduct( tv_temp, tv_temp ) < 0.001 )
//						GFX_FlammeFXOldPos = Cv_NullVector
//				}
//				if (GFX_FlammeFXOldPos == Cv_NullVector)
//				{
//					LIBGFX_JavelinFire( GFX_Flamme, GFX_FlammeFXPos, GFX_FlammeAxe )
//					GFX_Setf(GFX_Flamme, 13005, 0.01 )          		// Creation size min
//					GFX_Setf(GFX_Flamme, 13006, 0.01 )       			// Creation size max
//					if ( GFX_FlammeType == 2 )
//					{
//						GFX_Setv(GFX_Flamme, 13201, GFX_FlammeAxe * 10)  		// Speed min
//						GFX_Setv(GFX_Flamme, 13202, GFX_FlammeAxe * 10)  		// Speed max
//					}
//				}
//				else
//				{
//					LIBGFX_JavelinFire( GFX_Flamme, GFX_FlammeFXOldPos + (tv_temp / 2), tv_temp / 2)
//					GFX_Setf(GFX_Flamme, 13005, 0.05 )  		// Creation size min
//					GFX_Setf(GFX_Flamme, 13006, 0.05 )  		// Creation size max
//				}
//				if (ti_gfx == -1)
//				{
//					GFX_Setv(GFX_Flamme, 13201, cvector(0, 0, 1))  		// Speed min
//					GFX_Setv(GFX_Flamme, 13202, cvector(0, 0, 1))  		// Speed max
//					GFX_Setf(GFX_Flamme, 13009, 0.2)              			// Norm speed min
//					GFX_Setf(GFX_Flamme, 13010, 0.4) 	             		// Norm speed max
//					if ( GFX_FlammeType == 2 )
//					{
//						GFX_Setf(GFX_Flamme, 13000, 0.05)					// Growing speed min
//						GFX_Setf(GFX_Flamme, 13001, 0.1)					// Growing speed max
//					}
//					else
//					{
//						GFX_Setf(GFX_Flamme, 13000, 0.2)					// Growing speed min
//						GFX_Setf(GFX_Flamme, 13001, 0.4)					// Growing speed max
//					}
//					GFX_Setf(GFX_Flamme, 13008, 0.05 )             		// generation rate
//				}
//			}
//			
//			//----( Event )----
//			EVENT_AddEventFire( 0, o_canal_annexe1, GFX_FlammePos - GFX_FlammeAxe , 2 * GFX_FlammeAxe )
//			if( i_flag_tape_bambou )
//				EVENT_AddEventFire( 0, o_canal_annexe1, GFX_FlammeFXPos - GFX_FlammeAxe , 2 * GFX_FlammeAxe )
//		}
//		//----( GFX crane )----
////		else if ( GFX_FlammeType == 2 )
////		{
////			ti_gfx = GFX_Flamme
////							
////			if (GFX_FlammeOldPos == Cv_NullVector)
////				GFX_FlammeOldPos = GFX_FlammePos
////					
////			LIBGFX_ProjectileFire( GFX_Flamme, GFX_FlammePos, GFX_FlammeAxe, GFX_FlammeAxe, GFX_FlammeOldPos, GFX_FlammeAxe, 0.05 )
////					
////			if (ti_gfx == -1)
////			{
////				GFX_Setf(GFX_Flamme, 13008, 0.2 )             				// generation rate
////				GFX_Setf(GFX_Flamme, 13000, 0.2)              				// Growing speed min
////				GFX_Setf(GFX_Flamme, 13001, 0.4)              				// Growing speed max
////				GFX_Setf(GFX_Flamme, 13002, 0.01)              			// Friction Grow
////			}
////			GFX_FlammeOldPos = GFX_FlammePos
////		}
//		//----( GFX dynamite )----
//		else if ( GFX_FlammeType == 3 )
//		{
//			f_time_dynamite -= MATH_FloatMin(f_time_dynamite, TIME_GetDt())
//			tf_time_dyna_fire = f_time_dynamite / C_Time_Dyna
//			LIBGFX_DynamiteInFire(GFX_Spark, GFX_FlammeFXPos, GFX_FlammeAxe, tf_time_dyna_fire)
//		}
//		
//		GFX_FlammeOldPos = GFX_FlammePos
//		GFX_FlammeFXOldPos = GFX_FlammeFXPos
//	}
//	// ====[ C'est éteint ]====
//	else 
//	{
//		// Le joueur veut enflammer ma lance
//		if(i_flag_tape_bambou)
//		{
//			//----( en contact avec du feu )----
//			DBG_RenderVector(GFX_FlammePos, cvector(0,0,2), 0xFFFF00)
//			if ( EVENT_FIRE_IsPosInFire(GFX_FlammePos, o_grabbed_object_en_main) && !f_time_no_fire )
//			{
//				if(TIME_Elapsed(time_pshhhh1, 1))
//				{
//					time_pshhhh1 = TIME_Get()
//					SND_RequestPlay(34)
//				}
//				
//				H_Weapon_SetOnFire(vrai)
//			}
//			else if ( EVENT_FIRE_IsPosInFire(GFX_FlammeFXPos, o_grabbed_object_en_main) && !f_time_no_fire )
//			{
//				if(TIME_Elapsed(time_pshhhh1, 1))
//				{
//					time_pshhhh1 = TIME_Get()
//					SND_RequestPlay(34)
//				}
//				
//				H_Weapon_SetOnFire(vrai)
//			}
//		}
//		//---( arrete gfx & sound )----
//		else if ( (GFX_Flamme !=-1)  || (i_snd_fire != -1) || (GFX_Flamme2_Halo != -1) )
//			GFX_Fire_Stop()
//	}
//}
////====[ pas d'arme avec feu ]====
//else if ( (GFX_Spark !=-1) || (GFX_Flamme !=-1)  || (i_snd_fire != -1) || (GFX_Flamme2_Halo != -1) )
//{
//	GFX_Fire_Stop()
//}
//
//GFX_Flamme_endlabel:
//
//// Jack frappe avec le bambou
//@get_global i_bidoche_coup = faux
//if(i_flag_tape_bambou)
//{
//	// Met le feu par un coup
//	if(BambouEnMain())
//	{
//		if( H_Weapon_IsOnFire() )
//		{
//			if ( ANI_CurrentFrameGet(0) > 20 )
//			{
//				tv_temp = @get_camera OBJ_SightGet()
//				if ( tv_temp.z < 0 )
//				{
//					o_tir_prefered = COL_RayObject_Vector(GFX_FlammePos , cvector(0,0,-1.5), all, none, 0, COL_C_Ray_on_ColMap_NoCrossable)		
//					if(o_tir_prefered) 
//						LIBGFX_GridFire( GFX_FlammePos + (0.5 * OBJ_SightGet()), faux )
//				}
//			}
//		}
//		else
//		{
//			if ( CaseEnFeu( GFX_FlammePos ) )
//			{
//				o_tir_prefered = COL_RayObject_Vector(GFX_FlammePos , cvector(0,0,-1.5), all, none, 0, COL_C_Ray_on_ColMap_NoCrossable)		
//				if(o_tir_prefered) 
//					H_Weapon_SetOnFire(vrai)
//			}
//		}
//	}
//	
//	// Lancé de rayon
//	o_tir_prefered = nobody
//	if(BambouEnMain())
//	{
//		if(ANI_CurrentFrameGet(0) > 20)
//			@get_global i_bidoche_coup = vrai
//		
//		if(ANI_CurrentFrameGet(0) < 25)
//		{
//			tv_temp = -MATH_VecNormalize( GFX_FlammeAxe )
//			tv_temp = @o_canal_annexe1 OBJ_PosGet() + (tv_temp * 2.0)
//			tv_temp -= @get_camera OBJ_PosGet()
//			MATH_VecSetNorm(tv_temp, 4.0)
//			o_tir_prefered = COL_RayObject_Vector(@get_camera OBJ_PosGet(), tv_temp, all, none, 0, COL_C_Ray_on_visuel_and_bone_volumes)
//			if (o_tir_prefered && (COL_RayObject_SoundGet() == COL_C_Snd_Water) )
//					o_tir_prefered = nobody
//		}
//	}
//	else if( ! JetableEnMain() || LevierEnMain() )
//	{
//		if(ANI_CurrentFrameGet(0) > 15)
//			o_tir_prefered = COL_RayObject_Dist(@get_camera OBJ_PosGet(), @get_camera OBJ_SightGet(), 2.0, all, none, 0, COL_C_Ray_on_visuel_and_bone_volumes)
//	}
//	
//	if(o_tir_prefered) 
//	{
//		v_tir_prefered_impact = COL_RayObject_PosGet()
//		i_tir_prefered_canal = COL_RayObject_CanalGet()
//		if(i_tir_prefered_canal != -1) o_tir_prefered = COL_RayObject_ActorGet()
//	}
//	
//	// Repousse
//	if ( o_tir_prefered && (!@o_tir_prefered AI_IsModel(get_Humain_path) || @o_tir_prefered OBJ_CapaTest(OBJ_Capa_1)))
//	{
//		if(o_last_repousse != o_tir_prefered)
//		{
//			o_last_repousse = o_tir_prefered
//			
//			if(BambouEnMain() && @o_tir_prefered OBJ_FlagsIdentityTest(OBJ_C_IdentityFlag_DesignStruct))
//			{
//				if(o_tir_prefered.des_int1 & Ci_DISPLAY_FIGHT)
//				{
//					if(!LanceCassee())
//					{
//						@"univ" i_jack_cpt_plug++
//						if(LanceCassee())
//							CasseLance(0)
//					}
//					else 
//					{
//						@"univ" i_jack_cpt_plug++
//						if(@"univ" i_jack_cpt_plug >= 1002)
//						{
//							Humains_LeaveObjectInHand()
//							CasseLance(1)
//						}
//					}
//				}
//			}
//
//			ti_temp = C_PAF_KK_Repousse
//			@get_global o_jack_last_paf = o_tir_prefered
//			
//			// PAFS
//			ti_paf = 0
//			switch(@"univ" i_weapon_ID[i_id_humain])
//			{
//				case Ci_weapon_ID_bambou :
//				case Ci_weapon_ID_ossement :
//					ti_temp |= C_PAF_KK_GetBidoche		// chopper une bidoche !!!
//					if( H_Weapon_IsOnFire() )
//					{
//						ti_paf = 5
//						ti_temp |= C_PAF_KK_Fire
//					}
//					else if( H_Weapon_IsPoisonned() )
//					{
//						ti_paf = 5
//						ti_temp |= C_PAF_KK_Poison
//					}
//					else
//						ti_paf = 3
//					break
//					
//				case Ci_weapon_ID_levier :
//					ti_paf = 1
//					break
//					
//				case 0:
//					ti_temp |= C_PAF_KK_Jacks_Punch		// coup de poing de jack
//					ti_paf = 0
//					break
//					
//				default:
//					ti_paf = 1
//					break
//			}
//			
//			EVENT_AddEventPafCanal(C_EVENT_FILTER_All, ti_temp, OBJ_Me(), Cf_EVENT_Duree_1Trame, o_tir_prefered, i_tir_prefered_canal, ti_paf, @get_camera OBJ_SightGet(), v_tir_prefered_impact)
//			IO_PafSet(50, 2)
//		}
//	}
//}
//else
//{
//	o_last_repousse = nobody
//	COL_ColSetActivationSet(0, C_bit_zde_fight)	
//}
//
//// Param d'entrée --------------
//// i_ZdeFight_PosSet : Flags a vrai pour positionner la zone (remis a faux par defaut)
//// o_ZdeFight_Pos : Gao sur lequel snapper la Zone
//// v_ZdeFight_Pos : Offset local sur lequel snapper la Zone
//// f_ZdeFight_Size : Taille de la Zone.
//if(!o_canal_maind)
//	o_canal_maind = ANI_CanalObjectGet(Anim_Canal_Snap_MainD)
//o_ZdeFight_Pos = o_canal_annexe1
//tv_zde_fight = @o_ZdeFight_Pos OBJ_PosGet()
//tv_zde_fight += @o_ZdeFight_Pos OBJ_BankingGet()
//tv_zde_fight += @o_ZdeFight_Pos OBJ_SightGet() * 0.3
//tv_zde_fight -= @o_ZdeFight_Pos OBJ_HorizonGet() * 0.2
//COL_ZonePosSet(C_zde_fight, 	MATH_VecGlobalToLocal(tv_zde_fight - OBJ_PosGet()))
//COL_ZoneSizeSet(C_zde_fight, cvector(0.1, 0.1, 0.1))
//
//if (o_grenade) 
//{
//	to_obj1 = o_canal_maind
//	@o_grenade OBJ_PosSet(@to_obj1 OBJ_PosGet())	
//}
//
//if(!ANI_IsBoneAnimed(Anim_Canal_Snap_MainD))
//{
//	to_obj = o_canal_maind
//	to_obj1 = ANI_CanalObjectGet(Anim_Canal_MainDroite) 
//	@to_obj OBJ_PosSet(@to_obj1 OBJ_PosGet())
//	@to_obj OBJ_BankingGeneralSet(@to_obj1 OBJ_BankingGet(), @to_obj1 OBJ_SightGet())
//}
//
//	
//v_pos_annexe1 = @o_canal_annexe1 OBJ_PosGet()
//v_sight_annexe1 = @o_canal_annexe1 OBJ_SightGet()
//v_bank_annexe1 = @o_canal_annexe1 OBJ_BankingGet()
//
//if( ! ANI_IsBoneAnimed(Anim_Canal_Annex2) && ! i_recharge_arme )
//{
//	to_obj = o_canal_maind
//	to_obj1 = ANI_CanalObjectGet(Anim_Canal_Annex2) 
//	if(to_obj1) @to_obj1 OBJ_PosSet(@to_obj OBJ_PosGet())
//	if(to_obj1) @to_obj1 OBJ_BankingGeneralSet(@to_obj OBJ_SightGet(), @to_obj OBJ_BankingGet())
//}
//
//if( ! ANI_IsBoneAnimed(Anim_Canal_Annex3) && ! i_recharge_arme)
//{
//	to_obj = o_canal_maind
//	to_obj1 = ANI_CanalObjectGet(Anim_Canal_Annex3) 
//	if(to_obj1) @to_obj1 OBJ_PosSet(@to_obj OBJ_PosGet())
//	if(to_obj1) @to_obj1 OBJ_BankingGeneralSet(@to_obj OBJ_SightGet(), @to_obj OBJ_BankingGet())	
//}
//
//
////////// SFX EAU /////////
///////////////////////////////////
//if(IsWater(i_ground_ID) && f_hauteur_eau > 0)
//{
//	tv_temp = DYN_SpeedGetVector()
//	tv_temp.z = 0
//	tv_temp *= 4
//	col = 0x00303030
//	tv_temp1 = OBJ_PosGet()
////	tv_temp1.z = v_hauteur_eau.z
//	tv_temp1.z = f_water_Z_world // - 0.2
//	LIBGFX_MarcheDansEau(tv_temp1, tv_temp, 0, f_time_ripple, col)
//}
//
////////////////
//if(o_obj_declenche && i_flag_declenche)
//{
//	Humains_LeaveObjectInHand()
//	tv_temp = @o_obj_declenche OBJ_PosGet()
//	tv_temp -= (@o_obj_declenche OBJ_SightGet() * 0.5)
//	tv_temp -= @get_camera OBJ_PosGet()
//	tv_temp.z += 0.4
//	MATH_VecSetNormalize(tv_temp)
//	tv_temp = MATH_VecBlendRotate(@get_camera OBJ_SightGet(), tv_temp, 5 * TIME_GetDt())
//	@get_camera OBJ_SightGeneralSet(tv_temp, Cv_VerticalVector)
//}
//	
//
//