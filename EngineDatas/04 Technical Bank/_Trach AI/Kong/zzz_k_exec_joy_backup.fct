//#include "k_define.var"
//
//int				ti_rank
//int				ti_force_win_finish
//
//vector		tv_paf
//vector		tv_temp
//vector		tv_sight
//vector		tv_temp2
//
//object		to_gao
//object		to_Jack
//
//messageid	EVT_ID
//
//float			tf_dot
//float			tf_dist
//float			tf_rand
//
//ti_force_win_finish = faux
////ti_force_win_finish = vrai			// VINC !!!!
//
//i_joy_flag_dash_old = i_joy_flag_dash
//
//i_joy_flag_dash = faux
//i_flag_just_grab = faux
//i_flag_just_grab_JACK = faux
//i_flag_just_pose_JACK = faux
//i_flag_just_throw = faux
//i_flag_just_dodge = faux
//i_flag_just_Action = faux
//i_flag_just_coup = faux
//i_flag_intimidateD = faux
//i_flag_intimidateG = faux
//i_flag_just_Rage = faux
//i_flag_just_Rage_Any_Button = faux
//i_flag_trample = faux
//f_joy_norm = 0.0
//
//IO_SetControlMode(1)
//
//if ( ! i_Interaction_ReadInputs)
//	return
//
//if ( i_joy_disable_control)
//	return
//
//if ( @get_global i_frame_nbr < 11)	// Blocage JOY ES
//	return
//
//if( @get_global i_Player_is_Kong )
//{
//	// LE JOUEUR CONTROLE KONG ===========================================
//
//	// GRAB ---------------------------------------------------------------------------
//	if( IO_ButtonJustPressed(Kong_Joy_Grab) )
//	{
////		if( o_ANN && IO_ButtonPressed(Kong_Joy_Grab_Jack_Shift) )		// bouton shift pour poser Jack
////		{
////			if( @get_global Proc_Global_Player_Swap_Enabled() )
////			{
////				i_flag_just_grab = vrai
////				i_flag_just_pose_JACK = vrai
////			}
////		}
////		else
//			i_flag_just_grab = vrai
//	}
//	
//	// DASH ---------------------------------------------------------------------------
//	if( IO_ButtonPressed(Kong_Joy_Jump) )
//	{
//		i_joy_flag_dash = vrai
//		i_dash_for_walling = faux
//	}
//	
//	// JUMP ----------------------------------------------------------------------------
//	if( IO_ButtonJustPressed(Kong_Joy_Jump) )
//	{
//		i_flag_just_Action = vrai
//		i_flag_trample = vrai
//	}
//	
//	// PUNCH + MASHING ------------------------------------------------------
//	if( IO_ButtonJustPressed(Kong_Joy_Punch) )
//	{
//		i_flag_just_coup = vrai
//		i_flag_just_Rage_Any_Button = vrai
//	}
//	
//	// RAGE + MASHING --------------------------------------------------------
//	if( IO_ButtonJustPressed(Kong_Joy_Rage) )
//	{
//		i_flag_just_Rage = vrai
//		i_flag_just_Rage_Any_Button = vrai
//	}
//}
//else
//{
//	// LE JOUEUR CONTROLE JACK ============================================
//	if( @get_global i_Player_on_KK_Shoulder )
//	{
//		if( o_ANN && IO_ButtonJustPressed(Jack_Joy_Grimpe_Descend_de_Kong) )
//		{
//			if( @get_global Proc_Global_Player_Swap_Enabled() )
//			{
//				i_flag_just_grab = vrai
//				i_flag_just_pose_JACK = vrai
//			}
//		}
//	}
//	else
//	{
//		// DEMANDE DE GRAB JACK  ? -----------------------------------------
//		if( IO_ButtonJustPressed(Jack_Joy_Grimpe_Descend_de_Kong) && ! IO_ButtonPressed(Jack_Joy_Viser) )
//		{
//			// Caméra en FPS : Kong doit etre à l'écran et tourné vers Jack pour le grabber
//			if( @get_global Proc_Global_Player_Swap_Enabled() )
//			{
//				to_Jack = AI_MainActorGet(C_ID_Jack)
//				tv_temp = OBJ_PosGet() - @to_Jack OBJ_PosGet()
//				tv_temp.z = 0.0
//				tf_dist = MATH_VecNorm(tv_temp)
//				if( tf_dist < 6.0)
//				{
//					// assez proche
//					if( ! MATH_VecNullToler(tv_temp, 0.1) )
//						MATH_VecSetNormalize(tv_temp)
//					else
//						tv_temp = OBJ_SightGet()
//					tv_sight = @to_Jack OBJ_SightGet()
//					tv_sight.z = 0.0
//					if( ! MATH_VecNullToler(tv_sight, 0.1) )
//						MATH_VecSetNormalize(tv_sight)
//					else
//						tv_sight = @to_Jack OBJ_SightGet()
//					DBG_RenderVector(@to_Jack OBJ_PosGet(), tv_sight, color_vert)
//					DBG_RenderVector(@to_Jack OBJ_PosGet(), tv_temp, color_cyan)
//					tf_dot = MATH_VecDotProduct(tv_sight, tv_temp)
//					if( tf_dist < 3.0 || tf_dot > 0.0 )
//					{
//						// Jack regarde vers Kong
//						i_flag_just_grab = vrai
//						i_flag_just_grab_JACK = vrai		// Je DOIS grabber Jack
//					}
//				}
//			}
//		}
//		// ON A LAISSE KONG SUR UNE COLONNE ? -----------------------------------------
//		else if( Proc_KK_Test_Mode(ETAT_Kong_colonne) )
//		{
//			// Kong sur la colonne, Jack au sol
//			if( ACT_ActionGet() == Ci_Kanim_Colonne_Att )
//			{
//				f_auto_delai_action += TIME_GetDt()
//				if ( f_auto_delai_action > 1.5 )
//				{
//					f_auto_delai_action = 0.0
//					// test Jack descendu ?
//					tv_temp2 = @o_ANN OBJ_PosGet() - OBJ_PosGet()
//					if( tv_temp2.z < - 2.0 )
//					{
//						i_flag_just_Action = vrai		// jump !!!!
//					}
//					// test Baston
//					else if( o_fight_actor )
//					{
//						tf_rand = MATH_RandFloat(0.0, 1.0)
////						if( tf_rand < 0.1 )
////							i_flag_just_Action = vrai		// jump !!!!
////						else 
//						if( tf_rand < 0.4 )
//							i_flag_just_coup = vrai
//						else if( tf_rand < 0.8 )
//							i_flag_just_grab = vrai
//						else if( ao_CL_GRABKONG[0] )
//							i_flag_just_Rage = vrai		// mordre
//					}
//				}
//			}
//		}
//	}
//}
//
//
//
//// JOYJOYJOYJOYJOY ===========================================
//if( @get_global i_Player_is_Kong || @get_global i_Player_on_KK_Shoulder )
//{
//	// LE JOUEUR CONTROLE KONG ---------------------------------------------------------------
//	v_joy_sight_old = v_joy_sight			// Memo du joypour détection du SWEEP
//	f_joy_norm = glob_joynorm_get
//	if ( f_joy_norm)
//		v_joy_sight = glob_joyvector_get
//	else
//		v_joy_sight = v_look_direction  // OBJ_SightGet()
//	v_joy_sight_normalized = MATH_VecNormalize( v_joy_sight)
//}
//else
//{
//	// LE JOUEUR CONTROLE JACK ---------------------------------------------------------------
//	v_joy_sight_old = v_joy_sight			// Memo du joypour détection du SWEEP
////	if( ! ( IO_ButtonPressed(joy_button_L) && IO_ButtonPressed(joy_button_R) ) )		// DEBUG : figer KONG avec L1 + R1
//	if( ! ( @"univ" Cheat_i_Flags & CHEAT_Disable_Kong_AI_Move ) )
//	{
//		if( ! @get_global i_Player_on_KK_Shoulder )
//		{
//			if( Proc_KK_Test_Mode(ETAT_Kong_colonne) )
//			{
//				// colonne : pas de joy !!!!
//			}
//			else if ( o_fight_actor && ! i_flag_just_grab_JACK )
//			{
//				// Le joueur contrôle Jack, Kong est en fight =======================
//				v_joy_sight = @o_fight_actor OBJ_PosGet() - OBJ_PosGet()
//				if ( MATH_VecNullEpsilon( v_joy_sight))
//					v_joy_sight = OBJ_SightGet()
//				else
//					MATH_VecNormalize( v_joy_sight)
//				f_joy_norm = 1.0
//				f_auto_delai_action += TIME_GetDt()
//				
//				if ( i_coup_mode == C_Mode_Dash)
//				{
//					// dash attack
//					if ( f_auto_delai_action > 0.2 )
//					{
//						i_flag_just_coup = vrai
//						f_auto_delai_action = 0.0
//					}
//				}
//				else if( ti_force_win_finish && ( Proc_KK_Test_Mode(ETAT_Kong_finish) || Proc_KK_Test_Mode(ETAT_Kong_finished) ) )
//				{
//					// ne jamais perdre un finish(ed) (debug pour VINC)
//					v_joy_sight = OBJ_SightGet()
//					if ( f_auto_delai_action > 0.1 )
//					{
//						i_flag_just_Rage_Any_Button = vrai
//						f_auto_delai_action = 0.0
//					}
//				}
//				else if ( MATH_VecNorm(v_joy_sight) < (6.0 * @o_fight_actor OBJ_ZoomGet()) && ! Proc_KK_Test_Mode( ETAT_Kong_grab))
//				{
//					// proche, mais pas en grab
//					if ( f_auto_delai_action > 0.2 )
//					{
//						if ( MATH_RandFloat(0.0,1.0) < 0.5 )
//						{
//							i_flag_just_grab = vrai
//							f_auto_delai_action = 0.0
//						}
//						else if ( MATH_RandFloat(0.0,1.0) < 0.5 && ! Proc_KK_TestMashing(faux))
//						{
//							i_flag_just_Action = vrai
//							f_auto_delai_action = 0.0
//						}
//						else
//						{
//							i_flag_just_coup = vrai
//							f_auto_delai_action = 0.0
//						}
//					}
//					f_auto_joy_sens *= -1
//				}
//				else if ( Proc_KK_Test_Mode( ETAT_Kong_grab))
//				{
//					// en grab
//					if ( f_time_start_etat > 2.0 )
//					{
//						v_joy_sight = OBJ_HorizonGet()
//						if ( MATH_RandFloat( 0.0, 1.0) > 0.5 )
//							i_flag_just_coup = vrai
//						else
//							i_flag_just_grab = vrai
//					}
//					else if ( f_time_start_etat > 1.0 )
//					{
//						v_joy_sight = OBJ_HorizonGet()
//					}
//				}
//				MATH_VecSetNormalize(v_joy_sight)
//			}
//			else
//			{
//				// Le joueur contrôle Jack, Kong n'est pas en fight =====================
//				to_Jack = AI_MainActorGet(C_ID_Jack)
//				if( ! to_Jack || ! i_Kong_chienchien )
//				{
//					v_joy_sight = OBJ_SightGet()
//				}
//				else
//				{
//					tv_sight = OBJ_SightGet()
//					tv_sight.z = 0.0
//					tv_temp = @to_Jack OBJ_PosGet() - OBJ_PosGet()
//					tv_temp.z = 0.0
//					tf_dot = MATH_VecDotProduct(tv_sight, tv_temp)
//					tf_dist = MATH_VecNorm(tv_temp)
//					if( tf_dot < 0.0 || tf_dist > 12.0 )
//					{
//						// Kong se rapproche de Jack
//						f_joy_norm = 1.0
//						if( ! MATH_VecNullToler(tv_temp, 0.1) )
//							MATH_VecSetNormalize(tv_temp)
//						else	
//							tv_temp = OBJ_SightGet()
//						v_joy_sight = tv_temp
//					}
//					else
//					{
//						// Kong est à distance d'attente
//						v_joy_sight = OBJ_SightGet()
//					}
//				}
//			}
//		}
//	}
//	v_joy_sight_normalized = v_joy_sight
////	macro_render_Vector( OBJ_PosGet() +  cvector( 0.0, 0.0, 3.0), v_joy_sight_normalized * 5.0, 0xFF00)
//}
//
//
//#ifndef _FINAL_
//if( ! @get_global i_Player_is_Kong )
//	i_cheat_mode = faux
//else
//{
//	// CHEAT MODE =================================================================
//	if( ! i_cheat_mode && IO_ButtonPressed(joy_button_R) && IO_ButtonPressed(joy_button_R2) && IO_ButtonPressed(joy_button_L) && IO_ButtonPressed(joy_button_L2) )
//		i_cheat_mode = vrai
//	else if( i_cheat_mode == vrai && ( ! IO_ButtonPressed(joy_button_R) || ! IO_ButtonPressed(joy_button_R2) || ! IO_ButtonPressed(joy_button_L) || ! IO_ButtonPressed(joy_button_L2) ) )
//		i_cheat_mode = faux
//	else if  ( i_cheat_mode == vrai && IO_ButtonJustPressed(JoyPSX_Button_carre)) 
//	      i_cheat_mode = 2
//	else if( i_cheat_mode == 2 && ( IO_ButtonJustPressed(JoyPSX_Button_carre) ))
//	      i_cheat_mode = faux
//	
//	// PAF KITUE ===================================================================
//	if ( IO_ButtonPressed(joy_button_R2) &&  IO_ButtonPressed(joy_button_R) )
//	{
//		if ( IO_ButtonJustPressed(JoyPSX_Button_triangle) && IO_ButtonJustPressed(JoyPSX_Button_rond) )
//		{
//			ti_rank = -1
//			EVT_ID = MSG_GlobalScan(C_EVENT_TYPE_Visibility, &ti_rank)
//			while(MSG_GlobalIsValid(EVT_ID))
//			{
//				to_gao = EVENT_PereGet(EVT_ID)
//				if (to_gao != OBJ_Me() && to_gao != o_ANN)
//					Proc_KK_Send_Paf( C_EVENT_FILTER_KingKong, C_PAF_KK_KiTue, OBJ_Me(), Cf_EVENT_Duree_1Trame, to_gao, -1, 0.0, -OBJ_SightGet(), OBJ_PosGet() + OBJ_SightGet())
//				EVT_ID = MSG_GlobalScan(C_EVENT_TYPE_Visibility, &ti_rank)
//			}
//		}
//	}
//	
//	// PAF SUR KONG ==============================================================
//	if ( IO_ButtonPressed(joy_button_L2) &&  IO_ButtonPressed(joy_button_L) )
//	{
//		if ( IO_ButtonPressed(joy_button_R2) )
//		{
//			if ( IO_ButtonJustPressed( JoyPSX_Button_croix))
//				Proc_KK_Send_Paf( C_EVENT_FILTER_Enemy, C_PAF_KK_Moyen, o_ANN, Cf_EVENT_Duree_1Trame, OBJ_Me(), -1, 0.0, -OBJ_SightGet(), OBJ_PosGet() + OBJ_SightGet())
//			else if ( IO_ButtonJustPressed( JoyPSX_Button_triangle	))
//				Proc_KK_Send_Paf( C_EVENT_FILTER_Enemy, C_PAF_KK_Moyen, o_ANN, Cf_EVENT_Duree_1Trame, OBJ_Me(), -1, 0.0, OBJ_SightGet(), OBJ_PosGet() - OBJ_SightGet())
//			else if ( IO_ButtonJustPressed( JoyPSX_Button_carre))
//				Proc_KK_Send_Paf( C_EVENT_FILTER_Enemy, C_PAF_KK_Moyen, o_ANN, Cf_EVENT_Duree_1Trame, OBJ_Me(), -1, 0.0, OBJ_HorizonGet(), OBJ_PosGet() - OBJ_HorizonGet())
//			else if ( IO_ButtonJustPressed( JoyPSX_Button_rond))
//				Proc_KK_Send_Paf( C_EVENT_FILTER_Enemy, C_PAF_KK_Moyen, o_ANN, Cf_EVENT_Duree_1Trame, OBJ_Me(), -1, 0.0, -OBJ_HorizonGet(), OBJ_PosGet() + OBJ_HorizonGet()) 
//		}
//		else if ( IO_ButtonJustPressed( JoyPSX_Button_croix))
//			Proc_KK_Send_Paf( C_EVENT_FILTER_Enemy, C_PAF_KK_Fort, o_ANN, Cf_EVENT_Duree_1Trame, OBJ_Me(), -1, 0.0, -OBJ_SightGet(), OBJ_PosGet() + OBJ_SightGet())
//		else if ( IO_ButtonJustPressed( JoyPSX_Button_triangle	))
//			Proc_KK_Send_Paf( C_EVENT_FILTER_Enemy, C_PAF_KK_Fort, o_ANN, Cf_EVENT_Duree_1Trame, OBJ_Me(), -1, 0.0, OBJ_SightGet(), OBJ_PosGet() - OBJ_SightGet())
//		else if ( IO_ButtonJustPressed( JoyPSX_Button_carre))
//			Proc_KK_Send_Paf( C_EVENT_FILTER_Enemy, C_PAF_KK_Fort, o_ANN, Cf_EVENT_Duree_1Trame, OBJ_Me(), -1, 0.0, OBJ_HorizonGet(), OBJ_PosGet() - OBJ_HorizonGet())
//		else if ( IO_ButtonJustPressed( JoyPSX_Button_rond))
//			Proc_KK_Send_Paf( C_EVENT_FILTER_Enemy, C_PAF_KK_Fort, o_ANN, Cf_EVENT_Duree_1Trame, OBJ_Me(), -1, 0.0, -OBJ_HorizonGet(), OBJ_PosGet() + OBJ_HorizonGet()) 
//	}
//
//	// WATER DEBUG: PRESS A
//	//if (IO_KeyJustPressed(65))
//	//	i_Water_ON = 1 - i_Water_ON
//	
//	if (IO_KeyJustPressed(81))
//		i_DBG_TETE_ON = 1 - i_DBG_TETE_ON
//	if (IO_KeyJustPressed(83))
//		i_DBG_ROTX_ON = 1 - i_DBG_ROTX_ON
//	if (IO_KeyJustPressed(68))
//		i_DBG_IK_ON = 1 - i_DBG_IK_ON
//		
//}	
//#endif
//
//