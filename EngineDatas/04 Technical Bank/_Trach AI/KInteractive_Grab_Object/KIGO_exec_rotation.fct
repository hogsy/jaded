#include "KIGO_defines.var"

// Rotation du tronc quand il est jeté -------------------------------------------------------------------------------------

vector	tv_orient
vector	tv_souche_hauteur
vector	tv_pivot_pos

vector 	tv_from
vector 	tv_to


// position au centre du tronc pour la rotation
if ( i_grab_entite == Ci_Two_Handed )
	OBJ_PosSet(v_centre_pos)

// rotation
tv_orient = MATH_VecBlendRotate(cvector(1,0,0), cvector(0,1,0), f_proj_rot_coef_cur)
tv_from = MATH_VecGlobalToLocal(cvector(1,0,0))
tv_to = MATH_VecGlobalToLocal(tv_orient)
DBG_RenderVector(OBJ_PosGet(), tv_from, color_rouge)
DBG_RenderVector(OBJ_PosGet(), tv_to, color_vert)
OBJ_Rotate_FromTo(tv_from, tv_to)
f_proj_rot_coef_cur = MATH_FloatBlend(f_proj_rot_coef_cur, f_proj_rot_coef_final, f_proj_rot_coef_blend * TIME_GetDt())

// recalage du tronc
if ( i_grab_entite == Ci_Two_Handed )
{
	tv_souche_hauteur = Cf_hauteur_souche * OBJ_BankingGet()
	tv_pivot_pos = v_centre_pos - ( tv_souche_hauteur / 2.0 )
	OBJ_PosSet( tv_pivot_pos )
}