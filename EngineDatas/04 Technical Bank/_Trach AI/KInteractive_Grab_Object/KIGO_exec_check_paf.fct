
#include 		"KIGO_defines.var"

//=============================================================================
// DETECTION DES PAFS
//=============================================================================

// Events Pafs
int					ti_paf_rank				// Rang du paf dans la liste
messageid		tmid_paf_ID				// ID du paf
message		tmsg_paf_filter			// Message filtre pour la lecture de la liste

// Pafs reçus
int					ti_cur_paf_force		// dégats du paf courant
vector			tv_cur_paf_dir			// recul du paf


v_sum_pafs_dir = Cv_NullVector


MSG_SetNull( tmsg_paf_filter)
tmsg_paf_filter.msg_gao1 = OBJ_Me()

ti_paf_rank = -1
for (	tmid_paf_ID = MSG_GlobalSearchIntGao(C_EVENT_TYPE_Paf, &ti_paf_rank, tmsg_paf_filter);
		MSG_GlobalIsValid(tmid_paf_ID);
		tmid_paf_ID = MSG_GlobalSearchIntGao(C_EVENT_TYPE_Paf, &ti_paf_rank, tmsg_paf_filter) )
{
	tv_cur_paf_dir =  EVENT_PafDirGet(tmid_paf_ID)
	ti_cur_paf_force = EVENT_PafPuisGet(tmid_paf_ID)
	
	//i_nb_coup += ti_cur_paf_force
	tv_cur_paf_dir.z = 0.0
	if ( !MATH_VecNullEpsilon( tv_cur_paf_dir))
		MATH_VecSetNormalize(tv_cur_paf_dir)
	v_sum_pafs_dir += tv_cur_paf_dir
	o_PAF_actor = MSG_GlobalGetSender( tmid_paf_ID)
}

