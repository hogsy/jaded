
#include "BC_defines.var"

//=============================================================================
// LA BAT EST PERCHEE A UN ARBRE (TODO...)
//=============================================================================


// SORTIE ETAT
if (i_sort_etat)
{
	i_sort_etat = faux
	return
}

// ENTREE ETAT
if (i_etat_courant != ETAT_Attente_Perche)
{
	i_etat_ancien = i_etat_courant
	i_etat_courant = ETAT_Attente_Perche
	
	if (fct_last_etat)
	{
		i_sort_etat = vrai
		AI_Execute(fct_last_etat)
	}
	fct_last_etat = AI_TrackCurGet()
}

// le bat regarde devant lui
v_look_pos = OBJ_PosGet() + MATH_VecLocalToGlobal( cvector(0,-5,1) )



//==================== ANALYSE ======================

if( i_mode_agressif_ON )
{
	//================== BAT AGRESSIVE ====================
	
	macro_BC_bat_agressive_check_attaque
}
else
{
	//================= BAT CHAROGNARDE ==================
	
	// Sinon le bat renifle régulièrement les odeurs de sang
	macro_BC_check_sang
}

