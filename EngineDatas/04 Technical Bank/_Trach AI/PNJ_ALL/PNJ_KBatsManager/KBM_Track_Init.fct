#include "KBM_defines.var"

int			ti_i


i_DBG_Manager = faux

// RAZ VAR DBG SI PAS EN EDITEUR ===========================================
if( AI_GetCurSystem() != 10 )
{
	i_DBG_Manager = faux
}

// TEST CONFIG ============================================================
if( ! ao_init_attack_wp[0] || ! ao_post_attack_wp[0] || ! ao_bigbats[0] )
{
	DBG_Error("KBats Manager mal configuré !!!")
	OBJ_Destroy()
}


// DESACTIVATION SPAWNER =================================================
if( o_spawner )
	@o_spawner OBJ_FlagInactiveSet(vrai)		// le spawner sera réactivé en temps voulu


// SYNCHRONISATION =======================================================
for( ti_i = 0; ti_i < ci_bigbats_nb; ti_i++ )
{
	if( ao_bigbats[ti_i] )
	{
		@ao_bigbats[ti_i] KBC_Set_Manager(OBJ_Me(), ti_i)
		i_bigbat_count++
	}
}

if( i_DBG_Manager )
	DBG_TraceString("********** MANAGER ACTIVE **********\n")

// TRACKS ================================================================
AI_TrackChange(2, "KBM_ETAT_BigBat_Attack")
//AI_TrackChange(2, "KBM_Go")
AI_TrackChange(4, "KBM_Track_AfterEtat")
AI_TrackChange(0, "KBM_Track_Reflex")		// à la place de l'init

