//Include_UltraProcedure_Header

#include "KR_defines.var"

object 		to_desintegrator



// SORTIE ETAT ===================================================================
if (i_sort_etat)
{	
	i_sort_etat = faux
	return
}

// INITIALISATION ETAT ==============================================================
if( i_etat_courant != ETAT_Desintegrate )
{
	i_dernier_etat = i_etat_courant
	i_etat_courant = ETAT_Desintegrate

	if (fct_last_etat)
	{
		i_sort_etat = vrai
		AI_Execute(fct_last_etat)
	}

	DYN_SpeedSetVector(Cv_NullVector)
	v_paf_add_speed = Cv_NullVector

	fct_last_etat = AI_TrackCurGet()
	fct_main_etat = AI_TrackCurGet()

//	ACT_ActionSet(Action_Mort)
	
	f_time_start_etat = 0.0
	i_flag_look = faux
	
	to_desintegrator = @get_SFX_decomposition OBJ_Duplicate(cvector(0,0,0))			// ALOC (C'est l'AI qui va gerer la decomposition)
	@to_desintegrator Proc_Decomposition_Init(OBJ_Me(), 3.0, 0, 1, -1)				// INIT (Vas y decompose moi :))
}
else
{
	f_time_start_etat += TIME_GetDt()
}

