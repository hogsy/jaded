#include "MM_defines.var"

int					ti_rank
int					ti_ID
int					ti_index

object			to_actor

messageid		tmid_visibility
messageid		EVT_InfoSeen_ID


if (i_vision_check_flag)
	return
	
i_vision_check_flag = vrai

ti_rank = -1
for( 	tmid_visibility = MSG_GlobalScan(C_EVENT_TYPE_Visibility, &ti_rank); 
		MSG_GlobalIsValid(tmid_visibility); 
		tmid_visibility = MSG_GlobalScan(C_EVENT_TYPE_Visibility, &ti_rank))
{
	to_actor = EVENT_PereGet(tmid_visibility)
	if( to_actor == OBJ_Me() )
		continue
	
	ti_ID = EVENT_VisionIDGet(tmid_visibility)
	if( IsThis_ID_Humain(ti_ID) )
	{
		// je te vois !!!! :)
		ti_index = BigMonster_Perceived_Actor_Add(to_actor, tmid_visibility)
		EVT_InfoSeen_ID = EVENT_AddEventInfo(OBJ_Me(), to_actor, C_EVENT_INFOTYPE_SEEN)
		EVENT_Info_OutsideGridSet(EVT_InfoSeen_ID, faux)
	}
}

