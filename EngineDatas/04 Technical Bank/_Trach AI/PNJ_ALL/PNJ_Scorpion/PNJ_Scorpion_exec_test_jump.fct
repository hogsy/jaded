#include "PNJ_Scorpion_defines.var"

float			tf_angle

if (f_jauge_esquive > 0.5)
{
	if (GRID_LIB_IsReachableFrom(OBJ_PosGet(), OBJ_PosGet() + (OBJ_HorizonGet() * 3.0), 0b0, 0.0, faux, 0))
	{
		f_dodge_side_sign = 1.0
		macro_change_etat("PNJ_Scorpion_ETAT_DODGE")
	}
	else if (GRID_LIB_IsReachableFrom(OBJ_PosGet(), OBJ_PosGet() - (OBJ_HorizonGet() * 3.0), 0b0, 0.0, faux, 0))
	{
		f_dodge_side_sign = -1.0
		macro_change_etat("PNJ_Scorpion_ETAT_DODGE")
	}
}
	
return

if (i_flag_dodge_shot_jump && GRID_LIB_IsReachableFrom(OBJ_PosGet(), v_jump_dest_pos, 0b0, 0.0, faux, 0))
{
	v_jump_dest_pos.z += 2.0
	if (COL_RayObject_Dist(v_jump_dest_pos, -Cv_VerticalVector, 4.0, all, OBJ_C_IdentityFlag_Anims | OBJ_C_IdentityFlag_Dyna, Ci_Filter_IdentityFlag, COL_C_Ray_on_ColMap_NoCrossable))
	{
		v_jump_dest_pos = COL_RayObject_PosGet()
		
//			DBG_RenderVector(v_jump_dest_pos, Cv_VerticalVector * 5.0, color_blanc)	

		macro_change_etat("PNJ_Scorpion_ETAT_SAUT")
	}
}