#include "PNJ_Raptor_defines.var"

int				ti_i

float			tf_dot_X
float			tf_dot_Y
float			tf_sight_speed

vector		tv_new_sight
vector		tv_speed

// SORTIE ETAT ===================================================================
if (i_sort_etat)
{
	i_sort_etat = faux

	DYN_FrictionVectorSet(Cv_Raptor_friction)	

	return
}

// INITIALISATION ETAT ==============================================================
if (i_etat_courant != ETAT_paf_waooo)
{
	i_dernier_etat = i_etat_courant
	i_etat_courant = ETAT_paf_waooo

	if (fct_last_etat)
	{
		i_sort_etat = vrai
		AI_Execute(fct_last_etat)
	}

	fct_last_etat = AI_TrackCurGet()

	o_grab_actor = LNK_ClientGet(Ci_LNK_GRAB_RAPTOR, mid_grab_actor_LNK_ID, faux, nofunc, nofunc, nofunc)

//	DYN_FrictionVectorSet(Cv_Raptor_friction)	
	DYN_FrictionVectorSet(Cv_NullVector)	
	ACT_ActionSet(Action_Paf_Waooo)

//	tv_speed = DYN_SpeedGetVector()
//	tv_speed = MATH_VecRotate(tv_speed, Cv_VerticalVector, MATH_VecAngle(-OBJ_SightGet(), v_paf_dir, Cv_VerticalVector))
//	
//	DYN_SpeedSetVector(tv_speed)
//
	f_time_start_etat = 0.0
}
else
{
	f_time_start_etat += TIME_GetDt()

//	DYN_SpeedSetVector(v_dyn_speed)
}

// COMPORTEMENT =================================================================================================
if (ACT_ActionFinished())
{
	macro_change_etat("PNJ_Raptor_ETAT_mort")
}

//tv_new_sight = MATH_VecBlendRotate(OBJ_SightGet(), -v_paf_dir, 6.0 * TIME_GetDt())
//OBJ_BankingGeneralSet(tv_new_sight, Cv_VerticalVector)
