#include "PNJ_Raptor_defines.var"

int				ti_i

vector		tv_new_sight

// SORTIE ETAT ===================================================================
if (i_sort_etat)
{
	i_sort_etat = faux

	o_backstaber = LNK_ClientGet(Ci_LNK_BACKSTAB, mid_backstab_LNK_ID, faux, nofunc, nofunc, nofunc)
	
	return
}

// INITIALISATION ETAT ==============================================================
if (i_etat_courant != ETAT_backstab)
{
	i_dernier_etat = i_etat_courant
	i_etat_courant = ETAT_backstab

	if (fct_last_etat)
	{
		i_sort_etat = vrai
		AI_Execute(fct_last_etat)
	}

	fct_last_etat = AI_TrackCurGet()

	ACT_ActionSet(Action_Paf_poignarde)

	DYN_FrictionVectorSet(Cv_Raptor_friction)	

	f_time_start_etat = 0.0
}
else
{
	f_time_start_etat += TIME_GetDt()
}

// COMPORTEMENT =================================================================================================
if (ACT_ActionFinished() && f_time_start_etat > 6.0)
	macro_change_etat(fct_main_etat)

