#include "KT_defines.var"


// SORTIE ETAT ===================================================================
if (i_sort_etat)
{
	i_sort_etat = faux
	return
}

// INITIALISATION ETAT ==============================================================
if (i_etat_courant != ETAT_TEST)
{
	i_dernier_etat = i_etat_courant
	i_etat_courant = ETAT_TEST

	if (fct_last_etat)
	{
		i_sort_etat = vrai
		AI_Execute(fct_last_etat)
	}
	
	fct_last_etat = AI_TrackCurGet()
	f_time_start_etat = 0.0
	i_test_cpt = 0
	
	if( i_TEST_Anim == -1 )
		i_TEST_Anim = Action_Normal_Attente
	ACT_ActionSet(i_TEST_Anim)
}
else
{
	f_time_start_etat += TIME_GetDt()
}

if( ACT_ActionFinished() )
	ACT_ActionSet(i_TEST_Anim | Ci_ActionSet_Force_SameAction | Ci_ActionSet_Force_FrameZero )

// Detection de PAF
AI_Execute("KT_exec_check_paf")
