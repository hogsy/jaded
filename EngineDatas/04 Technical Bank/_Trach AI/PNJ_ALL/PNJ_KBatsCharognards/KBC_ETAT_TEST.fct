#include "KBC_defines.var"

if( i_sort_etat )
{
	i_sort_etat = faux
	return
}


if( i_etat_courant != ETAT_TEST )
{
	i_etat_ancien_ancien = i_etat_ancien
	i_etat_ancien = i_etat_courant
	i_etat_courant = ETAT_TEST
	if( fct_last_etat )
	{
		i_sort_etat = vrai
		AI_Execute(fct_last_etat)
	}
	fct_last_etat = AI_TrackCurGet()
	f_time_start_etat = 0.0
	
	ACT_ActionSet(i_ACTION_Vol_Standard)
//	ACT_ActionSet(ACTION_Perchee_Attente)
//	ACT_ActionSet(ACTION_Perchee_Panic)
//	ACT_ActionSet(ACTION_Perchee_Panic_var)

//	OBJ_SightGeneralSet(- Cv_VerticalVector, OBJ_BankingGet())
}
else
{
	f_time_start_etat += TIME_GetDt()
}

i_flag_neck = faux

//if( IO_KeyJustPressed(65) )
//	KBC_GFX_Particules_PafDeKong(OBJ_PosGet() + OBJ_SightGet(), - OBJ_SightGet())


//return

//
//if( o_track_test_wp )
//	v_look_pos = @o_track_test_wp OBJ_PosGet()
//
//if( IO_KeyJustPressed(65) )
//	i_flag_neck = 1 - i_flag_neck

//Str_DisplayIntOnce(i_flag_neck, Cv_NullVector)

//if( f_time_start_etat > 2.0 && o_track_test_wp )
//{
//	o_cible_attaque = o_track_test_wp
//	AI_Execute("KBC_exec_dyn_on")
//	DYN_SpeedSetVector(Cv_NullVector)
//	tmid_vision = EVENT_FindEventPereTarget(C_EVENT_TYPE_Visibility, o_cible_attaque, nobody)
//	if( MSG_GlobalIsValid(tmid_vision) )
//		KBC_Seen_Actor_Add(tmid_vision)
//	SND_RequestPlay(Ci_SND_Cri_Attack_Loin)			// je crie pour annoncer que je vais attaquer
//	macro_change_etat("KBC_ETAT_Fight_Approche")
//}
