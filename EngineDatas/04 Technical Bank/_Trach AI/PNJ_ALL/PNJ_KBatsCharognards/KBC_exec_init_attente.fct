#include "KBC_defines.var"

KBC_DBG_Trace(i_DBG_trace_etat, "init attente")

AI_Execute("KBC_exec_dyn_on")

KBC_reset_attaque()

KBC_action_frequency_set(1.0)

// vitesse de référence et mode de déplacement réseau
if( MSG_GlobalIsValid( mid_grab_charogne ) )
{
	KBC_ref_speed_set(f_vitesse_move_grab)
	i_mode_depl = Ci_mode_depl_charogne_transport
}
else
{
	o_cible = nobody
	KBC_ref_speed_set(f_vitesse_move_network)
	i_mode_depl = Ci_mode_depl_attente
}


// KING KONG 2 : IMPORT FROM JACK'S BATS ===============
o_cadavre = nobody		// je sors peut etre de foodchain -> raz flags et interet en tagon
i_flag_frein = faux
// KING KONG 2 : IMPORT FROM JACK'S BATS ===============

i_flag_net_1st_move = vrai							// 1er mouvement pour repartir

if( f_total_time == 0.0 && i_KONG_ride_walling_bat )
	macro_change_etat("KBC_ETAT_Move_Ronde")			// bat ride wallign attack => initialisation en mode ronde
else if( KBC_RetourneSePercher_EnCours() )
	macro_change_etat("KBC_ETAT_Move_Network")			// retourne se percher
else if( MSG_GlobalIsValid( mid_grab_charogne ) )
	macro_change_etat("KBC_ETAT_Move_Network")			// go to eat wp
else if( ! JOUR_NUIT_HeureCorrecte(f_Heure_Debut, f_Heure_Fin) )
	macro_change_etat("KBC_ETAT_Move_JourNuit")			// go to exit wp
else
	macro_change_etat("KBC_ETAT_Move_Network")			// retour au réseau

