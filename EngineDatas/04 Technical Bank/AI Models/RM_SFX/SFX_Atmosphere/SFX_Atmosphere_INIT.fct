float	tf_alpha
vector tv_pos

f_heure_actuelle = f_heure_depart
f_heure_lune = f_heure_depart - 12
f_vitesse_old = f_vitesse

// Secto mer de nuages
if (o_mer_mobile)
	@o_mer_mobile SCT_SetOf(@get_global i_secto_atmosphere1,@get_global i_secto_atmosphere2,0,0)

if (o_mer_lointaine)
	@o_mer_lointaine SCT_SetOf(@get_global i_secto_atmosphere1,@get_global i_secto_atmosphere2,0,0)

if (o_sky)
	@o_sky SCT_SetOf(@get_global i_secto_merdenuage1, @get_global i_secto_merdenuage2, 0, 0)


// Alpha du matériau de la lune
tf_alpha = COLOR_GetA(c_amb_ciel_mid)

@o_espace MAT_MT_SetLocalAlpha(0,1,tf_alpha)
i_alpha_atmos = 255 - @o_espace MAT_MT_GetLocalAlpha(0,1)

//--------------------------------------------
//		MER DE NUAGES
//--------------------------------------------
// Positionnement des plaques de mer
tv_pos = @get_rayman OBJ_PosGet() - cvector(0,0,f_dist_mer_nuages)
if (o_mer_mobile)
	@o_mer_mobile OBJ_PosSet(tv_pos)
//else
//	DBG_Warning("MER DE NUAGES : vous devez attribuer l'objet ENV_mer_nuages_mobile dans les paramètres LD de l'IA d'environement")

if (o_mer_lointaine)
	@o_mer_lointaine OBJ_PosSet(tv_pos - cvector(0,0,50))
//else
//	DBG_Warning("MER DE NUAGES : vous devez attribuer l'objet ENV_mer_nuages_lointaine dans les paramètres LD de l'IA d'environement")

//-------------------------------
// Boucle principale
//-------------------------------
AI_TrackCurChangeNow("SFX_Atmosphere_LOOP")