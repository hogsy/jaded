int			capa, x, y
vector	tv_temp, tv_temp1

i_SF_AlreadyPlayed = AI_SFDynGet(0, SF_MinById, SF_MaxById)		// arme
SpecialFlag_get(i_SF_AlreadyPlayed, capa)
if(capa)
{
	GRID_CurrentSet(1)
	if(!GRID_IsIn(OBJ_PosGet())) 
	{
		i_wait_barre = faux
		GRID_CurrentSet(0)
		return
	}
	
	if(i_wait_barre) return
	i_wait_barre = vrai
	
	OBJ_CapaSet(OBJ_Capa_0, 0)
	GRID_CurrentSet(1)
	av_FireCase[0] = OBJ_PosGet()
	i_MaxCase = 1
	while(i_CurCase != i_MaxCase)
	{
		tv_temp = av_FireCase[i_CurCase]
		for(x = -1; x <= 1; x++)
		{
			for(y = -1; y <= 1; y++)
			{
				tv_temp1 = tv_temp
				tv_temp1.x += x
				tv_temp1.y += y
				if(GRID_CapaGet(tv_temp1) & 64) continue
				if(GRID_CapaGet(tv_temp1) & 128) continue
				if((GRID_CapaGet(tv_temp1) & tag_grid_terrain) != Ci_Grid2_Inflammable) continue
				
				av_FireCase[i_MaxCase] = tv_temp1
				
				GRID_CapaSet(tv_temp1, Ci_Grid2_Brule)
				
				i_MaxCase = MATH_Modulo(i_MaxCase + 1, 200)
			}
		}
		
		i_CurCase = MATH_Modulo(i_CurCase + 1, 200)
	}
	
	GRID_CurrentSet(0)
}
else
{
	GRID_CurrentSet(1)
	capa = GRID_CapaGet(OBJ_PosGet())
	if(capa & Ci_Grid2_EnFeu) 
	{
		GRID_CurrentSet(0)
		SpecialFlag_set(i_SF_AlreadyPlayed)
		i_wait_barre = vrai
	}
	
	GRID_CurrentSet(0)
}