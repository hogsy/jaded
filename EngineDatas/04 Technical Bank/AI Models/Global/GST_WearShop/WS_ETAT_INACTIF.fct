Include_UltraProcedure_Header
#include "WS_defines.var"

vector	tv_pos


// SORTIE D'ETAT ==========================================================
if( i_etat_sortie )
{
	i_etat_sortie = faux
	return
}

// ENTREE D'ETAT ==========================================================
if( i_etat_courant != ETAT_INACTIF )
{
	i_etat_ancien = i_etat_courant
	i_etat_courant = ETAT_INACTIF
	if( fct_etat_last_track )
	{
		i_etat_sortie = vrai
		AI_Execute(fct_etat_last_track)
	}
	fct_etat_last_track = AI_TrackCurGet()
	f_etat_duree = 0.0
	
	WOR_UnPause(0, 0xFFFFFFFF)
	@get_rayman OBJ_FlagInvisibleSet(faux)
	GRP_FlagInvisibleSet(vrai)
	@get_global Proc_CameraSet(get_Kamera)
	
	GST_WearShop_MedaillonDisplay(faux)
}
else
{
	f_etat_duree += TIME_GetDt()
}

// ANALYSE ===============================================================
if( @get_global i_wearshop_active_flag )
{
	tv_pos = @o_medaillon OBJ_PosGet()
	@o_rayman OBJ_PosSet(tv_pos)
	@o_rayman COL_StartMatrixSet(tv_pos)
	AI_TrackCurChangeNow("WS_ETAT_MEDAILLON")
}

// COMPORTEMENT =========================================================

@o_camera OBJ_FlagInactiveSet(vrai)

@o_rayman OBJ_FlagInactiveSet(vrai)
@o_rayman OBJ_FlagInvisibleSet(vrai)
