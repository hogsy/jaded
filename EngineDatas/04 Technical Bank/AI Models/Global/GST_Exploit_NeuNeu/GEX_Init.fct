
#include "GEX_Define.var"

int		ti_loop 

#ifndef _FINAL_ // =================================== CHEAT ==================
// Cas special de Test en mode Editeur Simple
if (!@"univ" Engine)
{
	switch (i_modetest_editeur)
	{
		case Ci_Normal :
			@"univ" i_death_shield = 0
			@"univ" i_death_exploit = 0
			break
				
		case Ci_NeuNeu :
			@"univ" i_death_shield = 500
			@"univ" i_death_exploit = 0
			break
	}
}
else
{
	switch (@"univ" Cheat_i_ModeNeuneuExploit)
	{
		case 1 :
		case 2 :
			@"univ" i_death_shield = 0
			@"univ" i_death_exploit = 0
			break
				
		case 3 :
			@"univ" i_death_shield = 500
			@"univ" i_death_exploit = 0
			break
	}
}
#endif // ========================================= CHEAT ======================

i_mode = Ci_Normal
if ( @"univ" i_death_shield - @"univ" i_death_exploit >= 3 )
{
	// On devrait etre en mode NeuNeu s'il y a un Gao Ennemi de defini
	for (ti_loop = 0; ti_loop < 5; ti_loop++)
	{
		if ( o_Nmi_ModeNeuNeu[ti_loop] )
		{
			i_mode = Ci_NeuNeu
			break
		 }
	}
}

// Si ya pas de trigger pas de test, la Zic se lance normalement.
if (!AI_TriggerIsValid(mus_trigger))
{
	i_play_zic = vrai
	OBJ_CapaSet(Obj_Capa_Switch, none)
}


switch( i_mode )
{
	case Ci_NeuNeu :
		if (@"univ" Cheat_i_Flags & CHEAT_ShowModeNeuneu )
			STR_CreateText( "MODE NENEU", cvector( 0.5, 0, 0), 0.5)

		if (i_log_info)
		{
			DBG_TraceObject(OBJ_Me())
			DBG_TraceString(" Execution en mode NeuNeu\n")
		}

		// Trigger Init
		for (ti_loop = 0; ti_loop < 5; ti_loop++)
		{
			if (AI_TriggerIsValid(TriggerExec_ModeNeuNeu[ti_loop]))
				call_trigger(TriggerExec_ModeNeuNeu[ti_loop])
			else
				break
		}
		break
			
	case Ci_Normal :
		if (i_log_info)
		{
			DBG_TraceObject(OBJ_Me())
			DBG_TraceString(" Execution en mode Normal\n")
		}
		
		// Trigger Init
		for (ti_loop = 0; ti_loop < 5; ti_loop++)
		{
			if (AI_TriggerIsValid(TriggerExec_ModeNormal[ti_loop]))
				call_trigger(TriggerExec_ModeNormal[ti_loop])
			else
				break
		}
		break
}

AI_TrackCurChangeNow("GEX_Go")